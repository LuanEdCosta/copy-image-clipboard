<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Development</title>

    <script src="../dist/index.browser.js"></script>
  </head>
  <body>
    <button id="jpeg1">Copy JPEG Image 1</button>
    <button id="png1">Copy PNG Image 1</button>
    <button id="first">Copy Image</button>

    <div id="images"></div>

    <script>
      console.log(CopyImageClipboard)
    </script>

    <script>
      document.getElementById('jpeg1').addEventListener('click', async () => {
        console.log('JPEG 1 Copied')
        await CopyImageClipboard.copyImageToClipboard(
          'https://images-na.ssl-images-amazon.com/images/I/81BES%2BtsVvL.png',
        )
      })

      document.getElementById('png1').addEventListener('click', async () => {
        console.log('PNG 1 Copied')
        await CopyImageClipboard.copyImageToClipboard(
          'https://images-na.ssl-images-amazon.com/images/I/71%2BmDoHG4mL.png',
        )
      })

      document.getElementById('first').addEventListener('click', async () => {
        console.log('First Image Copied')
        const image = document.getElementById('images').firstElementChild
        const blob = await CopyImageClipboard.getBlobFromImageElement(image)
        await CopyImageClipboard.copyBlobToClipboard(blob)
      })
    </script>

    <script>
      document.onpaste = (pasteEvent) => {
        const items = pasteEvent.clipboardData.items
        const blob = items[0].getAsFile()
        const reader = new FileReader()

        reader.onload = (renderEvent) => {
          const image = document.createElement('img')
          image.width = 150
          image.height = 150
          image.src = renderEvent.target.result
          image.style = 'margin: 8px 8px 0 0'
          document.getElementById('images').appendChild(image)
        }

        reader.readAsDataURL(blob)
      }
    </script>
  </body>
</html>
